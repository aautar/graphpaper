"use strict";var _slicedToArray=function(){function t(n,g){var o=[],s=!0,d=!1,a=void 0;try{for(var l,h=n[Symbol.iterator]();!(s=(l=h.next()).done)&&(o.push(l.value),!(g&&o.length===g));s=!0);}catch(u){d=!0,a=u}finally{try{!s&&h["return"]&&h["return"]()}finally{if(d)throw a}}return o}return function(n,g){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),GraphPaper=function(t){"use strict";function g(m,Y){this.getX=function(){return m},this.getY=function(){return Y},this.isEqual=function(L){return m===L.getX()&&Y===L.getY()},this.getCartesianPoint=function(L,S){return new g(m-0.5*L,-Y+0.5*S)},this.toString=function(){return m+" "+Y}}function o(m,Y){this.getType=function(){return m},this.getIntersectionPoint=function(){return Y}}function s(m,Y){var L=this;this.getStartPoint=function(){return m},this.getEndPoint=function(){return Y},this.isEqual=function(S){return L.getStartPoint().isEqual(S.getStartPoint())&&L.getEndPoint().isEqual(S.getEndPoint())},this.getLength=function(){return Math.sqrt(Math.pow(Y.getX()-m.getX(),2)+Math.pow(Y.getY()-m.getY(),2))},this.computeIntersectionType=function(S){var A=m.getX(),P=m.getY(),v=Y.getX(),w=Y.getY(),R=S.getStartPoint().getX(),B=S.getStartPoint().getY(),D=S.getEndPoint().getX(),G=S.getEndPoint().getY(),N=(G-B)*(v-A)-(D-R)*(w-P),_=(D-R)*(P-B)-(G-B)*(A-R),F=(v-A)*(P-B)-(w-P)*(A-R);if(0==N)return 0==N&&0==_&&0==F?O.COINCIDENT:O.PARALLEL;var k=_/N,z=F/N;return 1<k||0>k||1<z||0>z?O.LINE:O.LINESEG},this.computeIntersection=function(S){var A=m.getX(),P=m.getY(),v=Y.getX(),w=Y.getY(),R=S.getStartPoint().getX(),B=S.getStartPoint().getY(),D=S.getEndPoint().getX(),G=S.getEndPoint().getY(),N=(G-B)*(v-A)-(D-R)*(w-P),_=(D-R)*(P-B)-(G-B)*(A-R),F=(v-A)*(P-B)-(w-P)*(A-R);if(0==N)return 0==N&&0==_&&0==F?new o(O.COINCIDENT,null):new o(O.PARALLEL,null);var k=_/N,z=F/N,W=m.getX()+k*(Y.getX()-m.getX()),H=m.getY()+k*(Y.getY()-m.getY());return 1<k||0>k||1<z||0>z?new o(O.LINE,new g(W,H)):new o(O.LINESEG,new g(W,H))}}function d(m,Y,L,S){this.getLeft=function(){return m},this.getTop=function(){return Y},this.getRight=function(){return L},this.getBottom=function(){return S},this.getPoints=function(){return[new g(m,Y),new g(L,Y),new g(L,S),new g(m,S)]},this.getLines=function(){return[new s(new g(m,Y),new g(L,Y)),new s(new g(L,Y),new g(L,S)),new s(new g(L,S),new g(m,S)),new s(new g(m,S),new g(m,Y))]},this.getPointsScaledToGrid=function(A){var P=new g(m+0.5*(L-m),Y+0.5*(S-Y)),v=(L-P.getX()+A)/(L-P.getX()),w=(S-P.getY()+A)/(S-P.getY()),R=[new g((m-P.getX())*v+P.getX(),(Y-P.getY())*w+P.getY()),new g((L-P.getX())*v+P.getX(),(Y-P.getY())*w+P.getY()),new g((L-P.getX())*v+P.getX(),(S-P.getY())*w+P.getY()),new g((m-P.getX())*v+P.getX(),(S-P.getY())*w+P.getY())];return R},this.checkIntersect=function(A){return!(S<A.getTop())&&!(Y>A.getBottom())&&!(L<A.getLeft())&&!(m>A.getRight())},this.checkIsPointWithin=function(A){return A.getX()>=m&&A.getX()<=L&&A.getY()>=Y&&A.getY()<=S},this.checkIsWithin=function(A){return S<=A.getBottom()&&Y>=A.getTop()&&L<=A.getRight()&&m>=A.getLeft()}}function a(m){var Y=this,L=[];this.push=function(A){var P=!1;return(L.forEach(function(v){A.isEqual(v)&&(P=!0)}),!P)&&(L.push(A),!0)},this.findPointClosestTo=function(A){var P=null,v=Number.MAX_SAFE_INTEGER;return L.forEach(function(w){var R=new s(A,w);R.getLength()<v&&(P=w,v=R.getLength())}),P},this.findDistanceToPointClosestTo=function(A){var P=Number.MAX_SAFE_INTEGER;return L.forEach(function(v){var w=new s(A,v);w.getLength()<P&&(P=w.getLength())}),P},this.findPointsCloseTo=function(A,P){var v=new a;return L.forEach(function(w){var R=new s(A,w);R.getLength()<=P&&v.push(w)}),v},this.toArray=function(){return L},this.toFloat64Array=function(){for(var A=new Float64Array(2*L.length),P=0;P<L.length;P++)A[0+2*P]=L[P].getX(),A[1+2*P]=L[P].getY();return A};this.count=function(){return L.length},m&&Array.isArray(m)?m.forEach(Y.push):m&&"[object Float64Array]"===Object.prototype.toString.call(m)&&function S(A){L.length=0;for(var P=0;P<A.length;P+=2)L.push(new g(A[P],A[P+1]))}(m)}function h(m){var Y=this,L=[];this.push=function(A){var P=!1;return(L.forEach(function(v){A.isEqual(v)&&(P=!0)}),!P)&&(L.push(A),!0)},this.toArray=function(){return L},this.count=function(){return L.length},this.toFloat64Array=function(){for(var A=new Float64Array(4*L.length),P=0;P<L.length;P++)A[0+4*P]=L[P].getStartPoint().getX(),A[1+4*P]=L[P].getStartPoint().getY(),A[2+4*P]=L[P].getEndPoint().getX(),A[3+4*P]=L[P].getEndPoint().getY();return A};m&&Array.isArray(m)?m.forEach(Y.push):m&&"[object Float64Array]"===Object.prototype.toString.call(m)&&function S(A){L.length=0;for(var P=0;P<A.length;P+=4)L.push(new s(new g(A[P],A[P+1]),new g(A[P+2],A[P+3])))}(m)}function l(m,Y,L){var S=this;this.getObjectId=function(){return Y.getId()},this.getX=function(){return S.getCentroid().getX()},this.getY=function(){return S.getCentroid().getY()},this.getWidth=function(){var A=m.getBoundingClientRect();return A.right-A.left},this.getHeight=function(){var A=m.getBoundingClientRect();return A.bottom-A.top},this.getCentroid=function(){var A=m.getBoundingClientRect(),P=L.getPageOffset();return new g(A.left+P.getX()+0.5*S.getWidth(),A.top+P.getY()+0.5*S.getHeight())},this.getRoutingPoints=function(A){var P=S.getCentroid(),v=0.5*S.getWidth(),w=0.5*S.getHeight();return[new g(P.getX()+v+A,P.getY()),new g(P.getX()-v-A,P.getY()),new g(P.getX(),P.getY()+w+A),new g(P.getX(),P.getY()-w-A)]},this.getBoundingRectange=function(){var A=S.getCentroid(),P=0.5*S.getWidth(),v=0.5*S.getHeight();return new d(A.getX()-P,A.getY()-v,A.getX()+P,A.getY()+v)}}function u(m,Y,L,S,A){var v=this;"undefined"==typeof S&&(S="#000"),"undefined"==typeof A&&(A="2px");var w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d","M0 0 L0 0"),w.style.stroke=S,w.style.strokeWidth=A;this.appendPathToContainerDomElement=function(){L.appendChild(w)},this.refresh=function(R){w.setAttribute("d",R)},this.getId=function(){var R=[m.getObjectId(),Y.getObjectId()].sort();return R.join(":")},this.getDescriptor=function(){return{id:v.getId(),anchor_start_centroid:m.getCentroid().toString(),anchor_end_centroid:Y.getCentroid().toString()}}}function p(m,Y,L){this.getSize=function(){return m},this.getStyle=function(){return L},this.getSvgImageTile=function(){return L===X.LINE?"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\""+m+"\" height=\""+m+"\"><rect width=\""+m+"\" height=\"1\" x=\"0\" y=\""+(m-1)+"\" style=\"fill:"+Y+"\" /><rect width=\"1\" height=\""+m+"\" x=\""+(m-1)+"\" y=\"0\" style=\"fill:"+Y+"\" /></svg>":"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\""+m+"\" height=\""+m+"\"><rect width=\"1\" height=\"1\" x=\""+(m-1)+"\" y=\""+(m-1)+"\" style=\"fill:"+Y+"\" /></svg>"}}function I(m){var Y=this,L=[];this.getId=function(){return m},this.getObjectIndex=function(S){return Y.getObjectIndexById(S.getId())},this.getObjectIndexById=function(S){for(var A=0;A<L.length;A++)if(L[A].getId()===S)return A;return null},this.addObject=function(S){return null===Y.getObjectIndex(S)&&(L.push(S),!0)},this.getObjects=function(){return L},this.getObjectIds=function(){var S=[];return L.forEach(function(A){S.push(A.getId())}),S},this.removeObjectById=function(S){var A=Y.getObjectIndexById(S);return null!==A&&(L.splice(A,1),!0)},this.removeAllObjects=function(){L.length=0}}var O=Object.freeze({PARALLEL:"parallel",COINCIDENT:"coincident",LINE:"line",LINESEG:"lineseg"}),X={LINE:"line",DOT:"dot"};return t.Dimensions=function(m,Y){this.getWidth=function(){return m},this.getHeight=function(){return Y}},t.Rectangle=d,t.Point=g,t.LINE_INTERSECTION_TYPE=O,t.LineIntersection=o,t.Line=s,t.CanvasObject=function(m,Y,L,S,A,P,v,w,R){var G=this,_=[];this.x=parseInt(Y),this.y=parseInt(L),this.width=parseInt(S),this.height=parseInt(A),this.isDeleted=!1,this.addNonInteractableConnectorAnchor=function(F){_.push(new l(F,G,P))},this.addInteractableConnectorAnchor=function(F){var k=new l(F,G,P);F.addEventListener("click",function(){P.addConnectionAnchorToSelectionStack(k)}),_.push(k)},this.getConnectorAnchorRoutingPoints=function(F){var k=G.getBoundingRectange(),z=[];return _.forEach(function(W){var H=W.getRoutingPoints(F);H.forEach(function(M){k.checkIsPointWithin(M)||z.push(M)})}),z},this.getConnectorAnchors=function(){return _},this.getTranslateHandleOffsetX=function(){return-(w.offsetLeft+0.5*w.offsetWidth)},this.getTranslateHandleOffsetY=function(){return-(w.offsetTop+0.5*w.offsetHeight)},this.getId=function(){return m},this.getX=function(){return G.x},this.setX=function(F){G.x=F},this.getY=function(){return G.y},this.setY=function(F){G.y=F},this.translate=function(F,k){G.x=F,G.y=k,v.style.left=parseInt(G.x)+"px",v.style.top=parseInt(G.y)+"px"},this.getWidth=function(){return G.width},this.getHeight=function(){return G.height},this.resize=function(F,k){G.width=F,G.height=k,v.style.width=parseInt(G.width)+"px",v.style.height=parseInt(G.height)+"px"},this.getIsDeleted=function(){return G.isDeleted},this.getDomElement=function(){return v},this.handleSiblingObjectChange=function(){},this.getBoundingRectange=function(){var F=parseInt(G.x),k=parseInt(G.y),z=F+parseInt(G.width),W=k+parseInt(G.height);return new d(F,k,z,W)},this.getBoundingPoints=function(){var F=new g(G.getX(),G.getY()),k=new g(G.getX()+G.getWidth(),G.getY()),z=new g(G.getX(),G.getY()+G.getWidth()),W=new g(G.getX()+G.getWidth(),G.getY()+G.getWidth());return[F,k,z,W]};var B=function moveStart(){},D=function resizeStart(){};this.setMoveStartCallback=function(F){B=F},this.setResizeStartCallback=function(F){D=F},w.addEventListener("touchstart",function(F){B(G,F.touches[0].pageX,F.touches[0].pageY,!0)}),w.addEventListener("mousedown",function(F){B(G,F.pageX,F.pageY,!1)}),R.addEventListener("mousedown",function(F){F.which!==1||D(G,F.pageX,F.pageY)})},t.Canvas=function(m,Y,L){var M=this,q={DBLCLICK:"dblclick",CLICK:"click",OBJECT_ADDED:"object-added",OBJECT_RESIZED:"object-resized",OBJECT_TRANSLATED:"object-translated"},J=Y.document.createElementNS("http://www.w3.org/2000/svg","svg");J.style.width="100%",J.style.height="100%";var K=m.appendChild(J),S=null,A="transform 0.55s ease-in-out, transform-origin 0.55s ease-in-out",P=0,v=0,w=0,R=0,B=1,D=1,G=[],V=[],Z=[],_=null,F=null,k=0,z=0,W={lastTouchX:null,lastTouchY:null,lastTouchTime:null},U=[],$=new Map;this.getCurrentPointVisibilityMap=function(){return null},this.setGrid=function(he){S=he,m.style.background="url('data:image/svg+xml;base64,"+Y.btoa(S.getSvgImageTile())+"') repeat"},this.getGrid=function(){return S},this.getGridSize=function(){return S.getSize()};var Q=function(){var he=new a;return V.forEach(function(ce){var le=ce.getBoundingRectange().getPointsScaledToGrid(M.getGridSize());le.forEach(function(ue){he.push(ue)})}),V.forEach(function(ce){var le=ce.getConnectorAnchorRoutingPoints(M.getGridSize());le.forEach(function(ue){he.push(ue)})}),he},ee=function(){var he=new a;return V.forEach(function(ce){var le=ce.getConnectorAnchorRoutingPoints(M.getGridSize());le.forEach(function(ue){he.push(ue)})}),he},te=function(){var he=[];return V.forEach(function(ce){var le=ce.getBoundingRectange().getLines();le.forEach(function(fe){he.push(fe)});var ue=ce.getConnectorAnchors();ue.forEach(function(fe){var pe=fe.getBoundingRectange().getLines();pe.forEach(function(Ee){he.push(Ee)})})}),new h(he)},ne=function(){var he=[];Z.forEach(function(fe){he.push(fe.getDescriptor())});var ce=ee().toFloat64Array(),le=Q().toFloat64Array(),ue=te().toFloat64Array();L.postMessage({gridSize:M.getGridSize(),connectorDescriptors:he,routingPoints:le.buffer,boundaryLines:ue.buffer,anchorPoints:ce.buffer},[le.buffer,ue.buffer,ce.buffer])};L.onmessage=function(he){var ce=he.data.connectorDescriptors,le=function(ue){for(var fe=0;fe<ce.length;fe++)if(ce[fe].id===ue)return ce[fe];return null};Z.forEach(function(ue){var fe=le(ue.getId());fe&&ue.refresh(fe.svgPath)})};var H=function makeNewConnector(he,ce,le){return new u(he,ce,le)};this.setConnectorFactory=function(he){H=he},this.getTransitionCss=function(){return A},this.setTransitionCss=function(he){A=he,m.style.transition=A},this.getTransformOriginX=function(){return P},this.getTransformOriginY=function(){return v},this.getScaleFactor=function(){return B},this.getTranslateX=function(){return w},this.getTranslateY=function(){return R},this.setTransformOrigin=function(he,ce){P=he,v=ce,m.style.transformOrigin=P+"px "+v+"px"},this.scale=function(he,ce){if(ce=ce||!1,ce){var le=M.getGridSize()*he,ue=Math.round(le);he=ue/M.getGridSize()}return B=he,D=1/B,G.push("scale3d("+B+","+B+","+B+")"),M},this.translate=function(he,ce){return w=he,R=ce,G.push("translate3d("+w+"px,"+R+"px,0)"),M},this.applyTransform=function(){m.style.transform=G.join(" "),G.length=0},this.resetTransform=function(){B=1,D=1,w=0,R=0,m.style.transform="none"},this.getPageOffset=function(){return new g(window.pageXOffset,window.pageYOffset)},this.snapToGrid=function(he){var ce=Math.round(he/M.getGridSize())*M.getGridSize();return Math.max(0,ce-1)},this.getOffsetLeft=function(){return m.offsetLeft},this.getOffsetTop=function(){return m.offsetTop},this.getWidth=function(){return m.offsetWidth},this.getHeight=function(){return m.offsetHeight},this.getObjectsAroundPoint=function(he,ce){var le=[],ue=new d(he,ce,he+1,ce+1);return V.forEach(function(fe){!fe.getIsDeleted()&&ue.checkIntersect(fe.getBoundingRectange())&&le.push(fe)}),le},this.calcBoundingBox=function(){var he=null,ce=null,le=null,ue=null;return V.forEach(function(fe){var Te=parseInt(fe.getX()),Ie=parseInt(fe.getY()),be=Te+parseInt(fe.getWidth()),Ce=Ie+parseInt(fe.getHeight());(null==ce||Te<ce)&&(ce=Te),(null==he||Ie<he)&&(he=Ie),(null==le||Ce>le)&&(le=Ce),(null==ue||be>ue)&&(ue=be)}),new d(ce,he,ue,le)},this.getAllObjects=function(){return V},this.publishSiblingObjectChange=function(he,ce){V.forEach(function(le){le.handleSiblingObjectChange(he,ce)})},this.getObjectById=function(he){var ce=null;return V.forEach(function(le){null==ce&&le.getId()===he&&(ce=le)}),ce},this.addObject=function(he){he.setResizeStartCallback(ie),he.setMoveStartCallback(oe),V.push(he),ne(),ae(q.OBJECT_ADDED,{object:he})},this.getConnector=function(he){for(var ce=0;ce<Z.length;ce++)if(Z[ce].getId()===he)return Z[ce];return null},this.addConnectionAnchorToSelectionStack=function(he){if(U.push(he),2===U.length){var ce=H(U[0],U[1],K),le=M.getConnector(ce.getId());U.length=0,null===le&&(Z.push(ce),ce.appendPathToContainerDomElement(),ne())}};var ge=function(he,ce){var le=M.getObjectsAroundPoint(he,ce),ue={targetPoint:new g(he,ce),objectsAroundPoint:le};ae(q.DBLCLICK,ue)};this.initInteractionHandlers=function(he,ce){m.addEventListener("dblclick",function(le){ge(le.pageX,le.pageY)}),m.addEventListener("click",function(le){var ue=!1;le.target!==m&&(ue=!0);var fe={targetPoint:new g(le.pageX,le.pageY),canvasObjectClicked:ue};ae(q.CLICK,fe)}),m.addEventListener("touchend",function(le){if(0>=le.changedTouches.length)return!1;var ue=!1,fe=le.changedTouches[0].pageX,pe=le.changedTouches[0].pageY,Ee=new Date().getTime();if(null!==W.lastTouchTime){var Te=W.lastTouchTime,be=W.lastTouchX,Ce=W.lastTouchY,Oe=Math.sqrt(Math.pow(fe-be,2)+Math.pow(pe-Ce,2));Ee-Te<=he&&Oe<=ce&&(ue=!0,ge(fe,pe),W.lastTouchTime=null,W.lastTouchX=null,W.lastTouchY=null)}ue||(W.lastTouchTime=Ee,W.lastTouchX=fe,W.lastTouchY=pe)})};var ie=function(he){F=he.getId()},oe=function(he,ce,le){_=he.getId(),k=ce,z=le},se=function(he,ce){var le=M.getObjectById(_),ue=M.snapToGrid(he+le.getTranslateHandleOffsetX()),fe=M.snapToGrid(ce+le.getTranslateHandleOffsetY());le.translate(ue,fe),ae(q.OBJECT_TRANSLATED,{object:le}),ne()},re=function(he,ce){var le=M.getObjectById(_),ue=M.snapToGrid(he+le.getTranslateHandleOffsetX()),fe=M.snapToGrid(ce+le.getTranslateHandleOffsetY()),pe=k,Ee=z;if(pe==ue&&Ee==fe);else le.translate(ue,fe),ae(q.OBJECT_TRANSLATED,{object:le})},de=function(he,ce){var le=M.getObjectById(F),ue=M.snapToGrid(he),fe=M.snapToGrid(ce),pe=le.getY(),Ee=le.getX();le.resize(ue-Ee+1,fe-pe+1),ne(),ae(q.OBJECT_RESIZED,{object:le})};this.initTransformationHandlers=function(){m.addEventListener("touchmove",function(he){null!==_&&(se(he.touches[0].pageX*D,he.touches[0].pageY*D),he.preventDefault())}),m.addEventListener("mousemove",function(he){null!==_&&se(he.pageX*D,he.pageY*D),null!==F&&de(he.pageX*D,he.pageY*D)}),m.addEventListener("touchend",function(){if(null!==_){M.getObjectById(_);_=null,F=null}}),m.addEventListener("mouseup",function(he){1===he.which&&(null!==_&&re(he.pageX*D,he.pageY*D),_=null,F=null)}),m.addEventListener("mousedown",function(he){(null!==_||null!==F)&&(he.preventDefault(),he.stopPropagation())})};var ae=function(he,ce){for(var fe,le=$.get(he)||[],ue=0;ue<le.length;ue++)fe=le[ue],fe(ce)};this.off=function(he,ce){for(var le=$.get(he)||[],ue=0;ue<le.length;ue++)if(le[ue]===ce){le.splice(ue,1);break}$.set(he,le)},this.on=function(he,ce){var le=$.get(he)||[];le.push(ce),$.set(he,le)},M.setGrid(new p(12,"#424242",X.DOT)),M.resetTransform(),M.setTransformOrigin(0,0),M.setTransitionCss(A)},t.Cluster=I,t.BoxClusterDetector=function(m){var Y=this,L=function(P,v){for(var w=0;w<v.length;w++)if(v[w].getId()===P.getId())return w;return-1},S=function(P,v){for(var R,w=0;w<P.length;w++)R=L(P[w],v),-1!==R&&v.splice(R,1);return v},A=function(P){var v=0,w=null;return P.forEach(function(R,B){R>v&&(v=R,w=B)}),w};this.areObjectsClose=function(P,v){var w=new d(P.x-m,P.y-m,P.x+P.width+m,P.y+P.height+m),R=new d(v.x-m,v.y-m,v.x+v.width+m,v.y+v.height+m);return w.checkIntersect(R)},this.getAllObjectsCloseTo=function(P,v){for(var w=[],R=0;R<v.length;R++)P.getId()!==v[R].getId()&&Y.areObjectsClose(P,v[R])&&w.push(v[R]);return w},this.getClusterObjectsFromSeed=function(P,v,w){var R=Y.getAllObjectsCloseTo(P,v);return 0===R.length?[]:void(S(R.concat([P]),v),R.forEach(function(B){w.push(B),Y.getClusterObjectsFromSeed(B,v,w)}))},this.findIntersectingClustersForObjects=function(P,v){var w=new Map;return v.forEach(function(R){for(var B=R.getObjects(),D=0;D<B.length;D++)for(var G=0;G<P.length;G++)if(B[D].getId()===P[G].getId())if(w.has(R)){var N=w.get(R);w.set(R,N+1)}else w.set(R,1)}),w},this.removeObjectFromClusters=function(P,v){v.forEach(function(w){w.removeObjectById(P.getId())})},this.computeClusters=function(P,v,w){for(var R=v.map(function(F){return F}),B=P.map(function(F){return F});0<B.length;){var D=B.pop(),G=[D];if(Y.getClusterObjectsFromSeed(D,B,G),1<G.length){var N=Y.findIntersectingClustersForObjects(G,R);0===N.size?function(){var F=new I(w());G.forEach(function(k){F.addObject(k)}),R.push(F)}():function(){var F=A(N);F.removeAllObjects(),G.forEach(function(k){Y.removeObjectFromClusters(k,R),F.addObject(k)})}(),S(G,B)}else Y.removeObjectFromClusters(D,R)}var _=R.filter(function(F){return!!(2<=F.getObjects().length)});return _}},t.Connector=u,t.ConnectorAnchor=l,t.PointVisibilityMap=function(m,Y){var L=this,S=new Map,A=function(R){for(var G,B=Y.toArray(),D=0;D<B.length;D++)if(G=B[D].computeIntersectionType(R),G===O.LINESEG)return!0;return!1},v=function(R){var B=Number.MAX_SAFE_INTEGER,D=null,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var F,_=R.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(F=_.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(F.value,2),G=_step$value[0],N=_step$value[1];N<B&&(D=G,B=N)}}catch(k){_didIteratorError=!0,_iteratorError=k}finally{try{!_iteratorNormalCompletion&&_.return&&_.return()}finally{if(_didIteratorError)throw _iteratorError}}return null===D?null:{cost:B,point:D}},w=function(R,B,D,G){var _=new Map,N=S.get(D);N=N.filter(function(k){for(var z=0;z<B.length;z++)if(k.isEqual(B[z]))return!1;return!0}),N.forEach(function(k){var z=new s(D,k).getLength()+R,W=new s(k,G).getLength();_.set(k,z+W)});var F=v(_);return null===F?null:F};this.findPointClosestTo=function(R){var B=null,D=Number.MAX_SAFE_INTEGER;return S.forEach(function(G,N){var _=new s(R,N);_.getLength()<D&&(B=N,D=_.getLength())}),B},this.findVisiblePointClosestTo=function(R){var B=null,D=Number.MAX_SAFE_INTEGER;return S.forEach(function(G,N){var _=new s(R,N);!A(_)&&_.getLength()<D&&(B=N,D=_.getLength())}),B},this.computeRoute=function(R,B){var N=L.findVisiblePointClosestTo(R);if(null===N)return new a;for(var F,D=0,_=[N],G=N;(F=w(D,_,G,B),null!==F)&&(D+=new s(G,F.point).getLength(),_.push(F.point),G=F.point,!(1>new s(G,B).getLength())););return new a(_)},function P(){for(var R=m.toArray(),B=0;B<R.length;B++)S.set(R[B],[]);for(var D=0;D<R.length;D++)for(var N,G=D+1;G<R.length;G++)if(N=new s(R[D],R[G]),!A(N)){var _=S.get(R[D]);_.push(R[G]),S.set(R[D],_);var F=S.get(R[G]);F.push(R[D]),S.set(R[G],F)}}()},t.GRID_STYLE=X,t.Grid=p,t}({});