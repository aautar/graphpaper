"use strict";var _slicedToArray=function(){function a(f,g){var h=[],k=!0,l=!1,m=void 0;try{for(var o,n=f[Symbol.iterator]();!(k=(o=n.next()).done)&&(h.push(o.value),!(g&&h.length===g));k=!0);}catch(p){l=!0,m=p}finally{try{!k&&n["return"]&&n["return"]()}finally{if(l)throw m}}return h}return function(f,g){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return a(f,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),GraphPaper=function(a){"use strict";function g(B,C){this.__x=B,this.__y=C}function h(B,C){this.getType=function(){return B},this.getIntersectionPoint=function(){return C}}function k(B,C){this.__startPoint=B,this.__endPoint=C}function l(B,C,D,E){this.getLeft=function(){return B},this.getTop=function(){return C},this.getRight=function(){return D},this.getBottom=function(){return E},this.getPoints=function(){return[new g(B,C),new g(D,C),new g(D,E),new g(B,E)]},this.getLines=function(){return[new k(new g(B,C),new g(D,C)),new k(new g(D,C),new g(D,E)),new k(new g(D,E),new g(B,E)),new k(new g(B,E),new g(B,C))]},this.getPointsScaledToGrid=function(F){var G=new g(B+0.5*(D-B),C+0.5*(E-C)),H=(D-G.getX()+F)/(D-G.getX()),I=(E-G.getY()+F)/(E-G.getY()),J=[new g((B-G.getX())*H+G.getX(),(C-G.getY())*I+G.getY()),new g((D-G.getX())*H+G.getX(),(C-G.getY())*I+G.getY()),new g((D-G.getX())*H+G.getX(),(E-G.getY())*I+G.getY()),new g((B-G.getX())*H+G.getX(),(E-G.getY())*I+G.getY())];return J},this.checkIntersect=function(F){return!(E<F.getTop())&&!(C>F.getBottom())&&!(D<F.getLeft())&&!(B>F.getRight())},this.checkIsPointWithin=function(F){return F.getX()>=B&&F.getX()<=D&&F.getY()>=C&&F.getY()<=E},this.checkIsWithin=function(F){return E<=F.getBottom()&&C>=F.getTop()&&D<=F.getRight()&&B>=F.getLeft()}}function m(B){var C=this,D=[];this.push=function(F){for(var G=0;G<D.length;G++)if(F.isEqual(D[G]))return!1;return D.push(F),!0},this.findPointClosestTo=function(F){var G=null,H=Number.MAX_SAFE_INTEGER;return D.forEach(function(I){var J=new k(F,I);J.getLength()<H&&(G=I,H=J.getLength())}),G},this.findDistanceToPointClosestTo=function(F){var G=Number.MAX_SAFE_INTEGER;return D.forEach(function(H){var I=new k(F,H);I.getLength()<G&&(G=I.getLength())}),G},this.findPointsCloseTo=function(F,G){var H=new m;return D.forEach(function(I){var J=new k(F,I);J.getLength()<=G&&H.push(I)}),H},this.toArray=function(){return D},this.toFloat64Array=function(){for(var F=new Float64Array(2*D.length),G=0;G<D.length;G++)F[0+2*G]=D[G].getX(),F[1+2*G]=D[G].getY();return F};this.count=function(){return D.length},B&&Array.isArray(B)?B.forEach(C.push):B&&"[object Float64Array]"===Object.prototype.toString.call(B)&&function E(F){D.length=0;for(var G=0;G<F.length;G+=2)D.push(new g(F[G],F[G+1]))}(B)}function n(B){var C=this,D=[];this.push=function(F){var G=!1;return(D.forEach(function(H){F.isEqual(H)&&(G=!0)}),!G)&&(D.push(F),!0)},this.toArray=function(){return D},this.count=function(){return D.length},this.toFloat64Array=function(){for(var F=new Float64Array(4*D.length),G=0;G<D.length;G++)F[0+4*G]=D[G].getStartPoint().getX(),F[1+4*G]=D[G].getStartPoint().getY(),F[2+4*G]=D[G].getEndPoint().getX(),F[3+4*G]=D[G].getEndPoint().getY();return F};B&&Array.isArray(B)?B.forEach(C.push):B&&"[object Float64Array]"===Object.prototype.toString.call(B)&&function E(F){D.length=0;for(var G=0;G<F.length;G+=4)D.push(new k(new g(F[G],F[G+1]),new g(F[G+2],F[G+3])))}(B)}function o(B,C,D){var E=this;this.getId=function(){return B},this.getX=function(){return E.getCentroid().getX()},this.getY=function(){return E.getCentroid().getY()},this.getWidth=function(){var F=C.getBoundingClientRect();return F.right-F.left},this.getHeight=function(){var F=C.getBoundingClientRect();return F.bottom-F.top},this.getCentroid=function(){var F=C.getBoundingClientRect(),G=D.getPageOffset();return new g(F.left+G.getX()+0.5*E.getWidth(),F.top+G.getY()+0.5*E.getHeight())},this.getRoutingPoints=function(F){var G=E.getCentroid(),H=0.5*E.getWidth(),I=0.5*E.getHeight();return[new g(G.getX()+H+F,G.getY()),new g(G.getX()-H-F,G.getY()),new g(G.getX(),G.getY()+I+F),new g(G.getX(),G.getY()-I-F)]},this.getBoundingRectange=function(){var F=E.getCentroid(),G=0.5*E.getWidth(),H=0.5*E.getHeight();return new l(F.getX()-G,F.getY()-H,F.getX()+G,F.getY()+H)}}function p(B,C,D,E,F){var H=this;"undefined"==typeof E&&(E="#000"),"undefined"==typeof F&&(F="2px");var I=window.document.createElementNS("http://www.w3.org/2000/svg","path");I.setAttribute("d","M0 0 L0 0"),I.style.stroke=E,I.style.strokeWidth=F;this.appendPathToContainerDomElement=function(){D.appendChild(I)},this.refresh=function(J){I.setAttribute("d",J)},this.getId=function(){var J=[B.getId(),C.getId()].sort();return J.join(":")},this.getAnchorStart=function(){return B},this.getAnchorEnd=function(){return C},this.getDescriptor=function(){return{id:H.getId(),anchor_start_centroid:B.getCentroid().toString(),anchor_end_centroid:C.getCentroid().toString()}}}function s(B,C,D){this.getSize=function(){return B},this.getStyle=function(){return D},this.getSvgImageTile=function(){return D===A.LINE?"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\""+B+"\" height=\""+B+"\"><rect width=\""+B+"\" height=\"1\" x=\"0\" y=\""+(B-1)+"\" style=\"fill:"+C+"\" /><rect width=\"1\" height=\""+B+"\" x=\""+(B-1)+"\" y=\"0\" style=\"fill:"+C+"\" /></svg>":"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\""+B+"\" height=\""+B+"\"><rect width=\"1\" height=\"1\" x=\""+(B-1)+"\" y=\""+(B-1)+"\" style=\"fill:"+C+"\" /></svg>"}}function v(B){var C=this,D=[];this.getId=function(){return B},this.getObjectIndex=function(E){return C.getObjectIndexById(E.getId())},this.getObjectIndexById=function(E){for(var F=0;F<D.length;F++)if(D[F].getId()===E)return F;return null},this.addObject=function(E){return null===C.getObjectIndex(E)&&(D.push(E),!0)},this.getObjects=function(){return D},this.getObjectIds=function(){var E=[];return D.forEach(function(F){E.push(F.getId())}),E},this.removeObjectById=function(E){var F=C.getObjectIndexById(E);return null!==F&&(D.splice(F,1),!0)},this.removeAllObjects=function(){D.length=0}}g.prototype.getX=function(){return this.__x},g.prototype.getY=function(){return this.__y},g.prototype.isEqual=function(B){return this.__x===B.getX()&&this.__y===B.getY()},g.prototype.getCartesianPoint=function(B,C){return new g(this.__x-0.5*B,-this.__y+0.5*C)},g.prototype.toString=function(){return this.__x+" "+this.__y};var z=Object.freeze({PARALLEL:"parallel",COINCIDENT:"coincident",LINE:"line",LINESEG:"lineseg"});k.prototype.getStartPoint=function(){return this.__startPoint},k.prototype.getEndPoint=function(){return this.__endPoint},k.prototype.isEqual=function(B){return this.getStartPoint().isEqual(B.getStartPoint())&&this.getEndPoint().isEqual(B.getEndPoint())},k.prototype.getLength=function(){return Math.sqrt(Math.pow(this.__endPoint.getX()-this.__startPoint.getX(),2)+Math.pow(this.__endPoint.getY()-this.__startPoint.getY(),2))},k.prototype.computeIntersectionType=function(B){var C=this.__startPoint.getX(),D=this.__startPoint.getY(),E=this.__endPoint.getX(),F=this.__endPoint.getY(),G=B.getStartPoint().getX(),H=B.getStartPoint().getY(),I=B.getEndPoint().getX(),J=B.getEndPoint().getY(),K=(J-H)*(E-C)-(I-G)*(F-D),L=(I-G)*(D-H)-(J-H)*(C-G),M=(E-C)*(D-H)-(F-D)*(C-G);if(0==K)return 0==K&&0==L&&0==M?z.COINCIDENT:z.PARALLEL;var N=L/K,O=M/K;return 1<N||0>N||1<O||0>O?z.LINE:z.LINESEG},k.prototype.computeIntersection=function(B){var C=this.__startPoint.getX(),D=this.__startPoint.getY(),E=this.__endPoint.getX(),F=this.__endPoint.getY(),G=B.getStartPoint().getX(),H=B.getStartPoint().getY(),I=B.getEndPoint().getX(),J=B.getEndPoint().getY(),K=(J-H)*(E-C)-(I-G)*(F-D),L=(I-G)*(D-H)-(J-H)*(C-G),M=(E-C)*(D-H)-(F-D)*(C-G);if(0==K)return 0==K&&0==L&&0==M?new h(z.COINCIDENT,null):new h(z.PARALLEL,null);var N=L/K,O=M/K,P=this.__startPoint.getX()+N*(this.__endPoint.getX()-this.__startPoint.getX()),Q=this.__startPoint.getY()+N*(this.__endPoint.getY()-this.__startPoint.getY());return 1<N||0>N||1<O||0>O?new h(z.LINE,new g(P,Q)):new h(z.LINESEG,new g(P,Q))};var A={LINE:"line",DOT:"dot"};return a.Dimensions=function(B,C){this.getWidth=function(){return B},this.getHeight=function(){return C}},a.Rectangle=l,a.Point=g,a.LINE_INTERSECTION_TYPE=z,a.LineIntersection=h,a.Line=k,a.CanvasObject=function(B,C,D,E,F,G,H,I,J){var N=this,P=[],K=1e3;this.x=parseInt(C),this.y=parseInt(D),this.width=parseInt(E),this.height=parseInt(F),this.isDeleted=!1,this.addNonInteractableConnectorAnchor=function(Q){P.push(new o(B+("-"+K),Q,G)),K++},this.addInteractableConnectorAnchor=function(Q){var R=new o(B+("-"+K),Q,G);Q.addEventListener("click",function(){G.addConnectionAnchorToSelectionStack(R)}),P.push(R),K++},this.getConnectorAnchorRoutingPoints=function(Q){var R=N.getBoundingRectange(),S=[];return P.forEach(function(T){var U=T.getRoutingPoints(Q);U.forEach(function(V){R.checkIsPointWithin(V)||S.push(V)})}),S},this.getConnectorAnchors=function(){return P},this.getTranslateHandleOffsetX=function(){return-(I.offsetLeft+0.5*I.offsetWidth)},this.getTranslateHandleOffsetY=function(){return-(I.offsetTop+0.5*I.offsetHeight)},this.getId=function(){return B},this.getX=function(){return N.x},this.setX=function(Q){N.x=Q},this.getY=function(){return N.y},this.setY=function(Q){N.y=Q},this.translate=function(Q,R){N.x=Q,N.y=R,H.style.left=parseInt(N.x)+"px",H.style.top=parseInt(N.y)+"px"},this.getWidth=function(){return N.width},this.getHeight=function(){return N.height},this.resize=function(Q,R){N.width=Q,N.height=R,H.style.width=parseInt(N.width)+"px",H.style.height=parseInt(N.height)+"px"},this.getIsDeleted=function(){return N.isDeleted},this.getDomElement=function(){return H},this.handleSiblingObjectChange=function(){},this.getBoundingRectange=function(){var Q=parseInt(N.x),R=parseInt(N.y),S=Q+parseInt(N.width),T=R+parseInt(N.height);return new l(Q,R,S,T)},this.getBoundingPoints=function(){var Q=new g(N.getX(),N.getY()),R=new g(N.getX()+N.getWidth(),N.getY()),S=new g(N.getX(),N.getY()+N.getWidth()),T=new g(N.getX()+N.getWidth(),N.getY()+N.getWidth());return[Q,R,S,T]};var L=function moveStart(){},M=function resizeStart(){};this.setMoveStartCallback=function(Q){L=Q},this.setResizeStartCallback=function(Q){M=Q},I.addEventListener("touchstart",function(Q){L(N,Q.touches[0].pageX,Q.touches[0].pageY,!0)}),I.addEventListener("mousedown",function(Q){L(N,Q.pageX,Q.pageY,!1)}),J.addEventListener("mousedown",function(Q){Q.which!==1||M(N,Q.pageX,Q.pageY)})},a.Canvas=function(B,C,D){var U=this,V={DBLCLICK:"dblclick",CLICK:"click",OBJECT_ADDED:"object-added",OBJECT_RESIZED:"object-resized",OBJECT_TRANSLATED:"object-translated"},W=C.document.createElementNS("http://www.w3.org/2000/svg","svg");W.style.width="100%",W.style.height="100%";var X=B.appendChild(W),E=null,F="transform 0.55s ease-in-out, transform-origin 0.55s ease-in-out",G=0,H=0,I=0,J=0,K=1,L=1,M=[],Y=[],Z=[],O=null,P=null,Q=0,R=0,S={lastTouchX:null,lastTouchY:null,lastTouchTime:null},$=[],_=new Map;this.getCurrentPointVisibilityMap=function(){return null},this.setGrid=function(la){E=la,B.style.background="url('data:image/svg+xml;base64,"+C.btoa(E.getSvgImageTile())+"') repeat"},this.getGrid=function(){return E},this.getGridSize=function(){return E.getSize()};var aa=function(){var la=new m;return Y.forEach(function(ma){var na=ma.getBoundingRectange().getPointsScaledToGrid(U.getGridSize());na.forEach(function(oa){la.push(oa)})}),Y.forEach(function(ma){var na=ma.getConnectorAnchorRoutingPoints(U.getGridSize());na.forEach(function(oa){la.push(oa)})}),la},ba=function(){var la=new m;return Y.forEach(function(ma){var na=ma.getConnectorAnchorRoutingPoints(U.getGridSize());na.forEach(function(oa){la.push(oa)})}),la},ca=function(){var la=[];return Y.forEach(function(ma){var na=ma.getBoundingRectange().getLines();na.forEach(function(pa){la.push(pa)});var oa=ma.getConnectorAnchors();oa.forEach(function(pa){var qa=pa.getBoundingRectange().getLines();qa.forEach(function(ra){la.push(ra)})})}),new n(la)},da=function(){var la=[];Z.forEach(function(pa){la.push(pa.getDescriptor())});var ma=ba().toFloat64Array(),na=aa().toFloat64Array(),oa=ca().toFloat64Array();D.postMessage({gridSize:U.getGridSize(),connectorDescriptors:la,routingPoints:na.buffer,boundaryLines:oa.buffer,anchorPoints:ma.buffer},[na.buffer,oa.buffer,ma.buffer])};D.onmessage=function(la){var ma=la.data.connectorDescriptors,na=function(oa){for(var pa=0;pa<ma.length;pa++)if(ma[pa].id===oa)return ma[pa];return null};Z.forEach(function(oa){var pa=na(oa.getId());pa&&oa.refresh(pa.svgPath)})};var T=function makeNewConnector(la,ma,na){return new p(la,ma,na)};this.setConnectorFactory=function(la){T=la},this.getTransitionCss=function(){return F},this.setTransitionCss=function(la){F=la,B.style.transition=F},this.getTransformOriginX=function(){return G},this.getTransformOriginY=function(){return H},this.getScaleFactor=function(){return K},this.getTranslateX=function(){return I},this.getTranslateY=function(){return J},this.setTransformOrigin=function(la,ma){G=la,H=ma,B.style.transformOrigin=G+"px "+H+"px"},this.scale=function(la,ma){if(ma=ma||!1,ma){var na=U.getGridSize()*la,oa=Math.round(na);la=oa/U.getGridSize()}return K=la,L=1/K,M.push("scale3d("+K+","+K+","+K+")"),U},this.translate=function(la,ma){return I=la,J=ma,M.push("translate3d("+I+"px,"+J+"px,0)"),U},this.applyTransform=function(){B.style.transform=M.join(" "),M.length=0},this.resetTransform=function(){K=1,L=1,I=0,J=0,B.style.transform="none"},this.getPageOffset=function(){return new g(window.pageXOffset,window.pageYOffset)},this.snapToGrid=function(la){var ma=Math.round(la/U.getGridSize())*U.getGridSize();return Math.max(0,ma-1)},this.getOffsetLeft=function(){return B.offsetLeft},this.getOffsetTop=function(){return B.offsetTop},this.getWidth=function(){return B.offsetWidth},this.getHeight=function(){return B.offsetHeight},this.getObjectsAroundPoint=function(la,ma){var na=[],oa=new l(la,ma,la+1,ma+1);return Y.forEach(function(pa){!pa.getIsDeleted()&&oa.checkIntersect(pa.getBoundingRectange())&&na.push(pa)}),na},this.calcBoundingBox=function(){var la=null,ma=null,na=null,oa=null;return Y.forEach(function(pa){var sa=parseInt(pa.getX()),ta=parseInt(pa.getY()),ua=sa+parseInt(pa.getWidth()),va=ta+parseInt(pa.getHeight());(null==ma||sa<ma)&&(ma=sa),(null==la||ta<la)&&(la=ta),(null==na||va>na)&&(na=va),(null==oa||ua>oa)&&(oa=ua)}),new l(ma,la,oa,na)},this.getAllObjects=function(){return Y},this.publishSiblingObjectChange=function(la,ma){Y.forEach(function(na){na.handleSiblingObjectChange(la,ma)})},this.getObjectById=function(la){var ma=null;return Y.forEach(function(na){null==ma&&na.getId()===la&&(ma=na)}),ma},this.addObject=function(la){la.setResizeStartCallback(fa),la.setMoveStartCallback(ga),Y.push(la),da(),ka(V.OBJECT_ADDED,{object:la})},this.getConnector=function(la){for(var ma=0;ma<Z.length;ma++)if(Z[ma].getId()===la)return Z[ma];return null},this.makeNewConnectorFromAnchors=function(la,ma){var na=T(la,ma,X),oa=U.getConnector(na.getId());return null===oa?(Z.push(na),na.appendPathToContainerDomElement(),da(),na):oa},this.findBestConnectorAnchorsToConnectObjects=function(la,ma){for(var qa=la.getConnectorAnchors(),ra=ma.getConnectorAnchors(),na=0,oa=0,pa=Number.MAX_VALUE,sa=0;sa<qa.length;sa++)for(var ta=0;ta<ra.length;ta++){var ua=qa[sa].getCentroid(),va=ra[ta].getCentroid(),wa=Math.sqrt(Math.pow(va.getX()-ua.getX(),2)+Math.pow(va.getY()-ua.getY(),2));wa<pa&&(na=sa,oa=ta,pa=wa)}return{objectAConnectorIndex:na,objectAConnector:qa[na],objectBConnectorIndex:oa,objectBConnector:ra[oa]}},this.addConnectionAnchorToSelectionStack=function(la){$.push(la),2===$.length&&(U.makeNewConnectorFromAnchors($[0],$[1]),$.length=0)};var ea=function(la,ma){var na=U.getObjectsAroundPoint(la,ma),oa={targetPoint:new g(la,ma),objectsAroundPoint:na};ka(V.DBLCLICK,oa)};this.initInteractionHandlers=function(la,ma){B.addEventListener("dblclick",function(na){ea(na.pageX,na.pageY)}),B.addEventListener("click",function(na){var oa=!1;na.target!==B&&(oa=!0);var pa={targetPoint:new g(na.pageX,na.pageY),canvasObjectClicked:oa};ka(V.CLICK,pa)}),B.addEventListener("touchend",function(na){if(0>=na.changedTouches.length)return!1;var oa=!1,pa=na.changedTouches[0].pageX,qa=na.changedTouches[0].pageY,ra=new Date().getTime();if(null!==S.lastTouchTime){var sa=S.lastTouchTime,ua=S.lastTouchX,va=S.lastTouchY,wa=Math.sqrt(Math.pow(pa-ua,2)+Math.pow(qa-va,2));ra-sa<=la&&wa<=ma&&(oa=!0,ea(pa,qa),S.lastTouchTime=null,S.lastTouchX=null,S.lastTouchY=null)}oa||(S.lastTouchTime=ra,S.lastTouchX=pa,S.lastTouchY=qa)})};var fa=function(la){P=la.getId()},ga=function(la,ma,na){O=la.getId(),Q=ma,R=na},ha=function(la,ma){var na=U.getObjectById(O),oa=U.snapToGrid(la+na.getTranslateHandleOffsetX()),pa=U.snapToGrid(ma+na.getTranslateHandleOffsetY());na.translate(oa,pa),ka(V.OBJECT_TRANSLATED,{object:na}),da()},ia=function(la,ma){var na=U.getObjectById(O),oa=U.snapToGrid(la+na.getTranslateHandleOffsetX()),pa=U.snapToGrid(ma+na.getTranslateHandleOffsetY()),qa=Q,ra=R;qa==oa&&ra==pa||(na.translate(oa,pa),ka(V.OBJECT_TRANSLATED,{object:na}))},ja=function(la,ma){var na=U.getObjectById(P),oa=U.snapToGrid(la),pa=U.snapToGrid(ma),qa=na.getY(),ra=na.getX();na.resize(oa-ra+1,pa-qa+1),da(),ka(V.OBJECT_RESIZED,{object:na})};this.initTransformationHandlers=function(){B.addEventListener("touchmove",function(la){null!==O&&(ha(la.touches[0].pageX*L,la.touches[0].pageY*L),la.preventDefault())}),B.addEventListener("mousemove",function(la){null!==O&&ha(la.pageX*L,la.pageY*L),null!==P&&ja(la.pageX*L,la.pageY*L)}),B.addEventListener("touchend",function(){if(null!==O){U.getObjectById(O);O=null,P=null}}),B.addEventListener("mouseup",function(la){1===la.which&&(null!==O&&ia(la.pageX*L,la.pageY*L),O=null,P=null)}),B.addEventListener("mousedown",function(la){(null!==O||null!==P)&&(la.preventDefault(),la.stopPropagation())})};var ka=function(la,ma){for(var pa,na=_.get(la)||[],oa=0;oa<na.length;oa++)pa=na[oa],pa(ma)};this.off=function(la,ma){for(var na=_.get(la)||[],oa=0;oa<na.length;oa++)if(na[oa]===ma){na.splice(oa,1);break}_.set(la,na)},this.on=function(la,ma){var na=_.get(la)||[];na.push(ma),_.set(la,na)},U.setGrid(new s(12,"#424242",A.DOT)),U.resetTransform(),U.setTransformOrigin(0,0),U.setTransitionCss(F)},a.Cluster=v,a.BoxClusterDetector=function(B){var C=this,D=function(G,H){for(var I=0;I<H.length;I++)if(H[I].getId()===G.getId())return I;return-1},E=function(G,H){for(var J,I=0;I<G.length;I++)J=D(G[I],H),-1!==J&&H.splice(J,1);return H},F=function(G){var H=0,I=null;return G.forEach(function(J,K){J>H&&(H=J,I=K)}),I};this.areObjectsClose=function(G,H){var I=new l(G.x-B,G.y-B,G.x+G.width+B,G.y+G.height+B),J=new l(H.x-B,H.y-B,H.x+H.width+B,H.y+H.height+B);return I.checkIntersect(J)},this.getAllObjectsCloseTo=function(G,H){for(var I=[],J=0;J<H.length;J++)G.getId()!==H[J].getId()&&C.areObjectsClose(G,H[J])&&I.push(H[J]);return I},this.getClusterObjectsFromSeed=function(G,H,I){var J=C.getAllObjectsCloseTo(G,H);return 0===J.length?[]:void(E(J.concat([G]),H),J.forEach(function(K){I.push(K),C.getClusterObjectsFromSeed(K,H,I)}))},this.findIntersectingClustersForObjects=function(G,H){var I=new Map;return H.forEach(function(J){for(var K=J.getObjects(),L=0;L<K.length;L++)for(var M=0;M<G.length;M++)if(K[L].getId()===G[M].getId())if(I.has(J)){var N=I.get(J);I.set(J,N+1)}else I.set(J,1)}),I},this.removeObjectFromClusters=function(G,H){H.forEach(function(I){I.removeObjectById(G.getId())})},this.computeClusters=function(G,H,I){for(var J=H.map(function(P){return P}),K=G.map(function(P){return P});0<K.length;){var L=K.pop(),M=[L];if(C.getClusterObjectsFromSeed(L,K,M),1<M.length){var N=C.findIntersectingClustersForObjects(M,J);0===N.size?function(){var P=new v(I());M.forEach(function(Q){P.addObject(Q)}),J.push(P)}():function(){var P=F(N);P.removeAllObjects(),M.forEach(function(Q){C.removeObjectFromClusters(Q,J),P.addObject(Q)})}(),E(M,K)}else C.removeObjectFromClusters(L,J)}var O=J.filter(function(P){return!!(2<=P.getObjects().length)});return O}},a.Connector=p,a.ConnectorAnchor=o,a.PointVisibilityMap=function(B,C){var D=this,E=C.toArray(),F=new Map,G=function(K){for(var M,L=0;L<E.length;L++)if(M=E[L].computeIntersectionType(K),M===z.LINESEG)return!0;return!1},I=function(K){var L=Number.MAX_SAFE_INTEGER,M=null,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var Q,P=K.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(Q=P.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(Q.value,2),N=_step$value[0],O=_step$value[1];O<L&&(M=N,L=O)}}catch(R){_didIteratorError=!0,_iteratorError=R}finally{try{!_iteratorNormalCompletion&&P.return&&P.return()}finally{if(_didIteratorError)throw _iteratorError}}return null===M?null:{cost:L,point:M}},J=function(K,L,M,N){var P=new Map,O=F.get(M);O=O.filter(function(R){for(var S=0;S<L.length;S++)if(R.isEqual(L[S]))return!1;return!0}),O.forEach(function(R){var S=new k(M,R).getLength()+K,T=new k(R,N).getLength();P.set(R,S+T)});var Q=I(P);return null===Q?null:Q};this.findPointClosestTo=function(K){var L=null,M=Number.MAX_SAFE_INTEGER;return F.forEach(function(N,O){var P=new k(K,O);P.getLength()<M&&(L=O,M=P.getLength())}),L},this.findVisiblePointClosestTo=function(K){var L=null,M=Number.MAX_SAFE_INTEGER;return F.forEach(function(N,O){var P=new k(K,O);!G(P)&&P.getLength()<M&&(L=O,M=P.getLength())}),L},this.computeRoute=function(K,L){var O=D.findVisiblePointClosestTo(K);if(null===O)return new m;for(var Q,M=0,P=[O],N=O;(Q=J(M,P,N,L),null!==Q)&&(M+=new k(N,Q.point).getLength(),P.push(Q.point),N=Q.point,!(1>new k(N,L).getLength())););return new m(P)},function H(){for(var K=B.toArray(),L=0;L<K.length;L++)F.set(K[L],[]);for(var M=0;M<K.length;M++)for(var O,N=M+1;N<K.length;N++)if(O=new k(K[M],K[N]),!G(O)){var P=F.get(K[M]);P.push(K[N]),F.set(K[M],P);var Q=F.get(K[N]);Q.push(K[M]),F.set(K[N],Q)}}()},a.GRID_STYLE=A,a.Grid=s,a}({});