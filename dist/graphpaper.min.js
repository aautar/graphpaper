"use strict";var _slicedToArray=function(){function a(d,f){var g=[],h=!0,k=!1,l=void 0;try{for(var n,m=d[Symbol.iterator]();!(h=(n=m.next()).done)&&(g.push(n.value),!(f&&g.length===f));h=!0);}catch(o){k=!0,l=o}finally{try{!h&&m["return"]&&m["return"]()}finally{if(k)throw l}}return g}return function(d,f){if(Array.isArray(d))return d;if(Symbol.iterator in Object(d))return a(d,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),GraphPaper=function(a){"use strict";function f(A,B){this.getX=function(){return A},this.getY=function(){return B},this.isEqual=function(C){return A===C.getX()&&B===C.getY()},this.getCartesianPoint=function(C,D){return new f(A-0.5*C,-B+0.5*D)},this.toString=function(){return A+" "+B}}function g(A,B){this.getType=function(){return A},this.getIntersectionPoint=function(){return B}}function h(A,B){var C=this;this.getStartPoint=function(){return A},this.getEndPoint=function(){return B},this.isEqual=function(D){return C.getStartPoint().isEqual(D.getStartPoint())&&C.getEndPoint().isEqual(D.getEndPoint())},this.getLength=function(){return Math.sqrt(Math.pow(B.getX()-A.getX(),2)+Math.pow(B.getY()-A.getY(),2))},this.computeIntersectionType=function(D){var E=A.getX(),F=A.getY(),G=B.getX(),H=B.getY(),I=D.getStartPoint().getX(),J=D.getStartPoint().getY(),K=D.getEndPoint().getX(),L=D.getEndPoint().getY(),M=(L-J)*(G-E)-(K-I)*(H-F),N=(K-I)*(F-J)-(L-J)*(E-I),O=(G-E)*(F-J)-(H-F)*(E-I);if(0==M)return 0==M&&0==N&&0==O?w.COINCIDENT:w.PARALLEL;var P=N/M,Q=O/M;return 1<P||0>P||1<Q||0>Q?w.LINE:w.LINESEG},this.computeIntersection=function(D){var E=A.getX(),F=A.getY(),G=B.getX(),H=B.getY(),I=D.getStartPoint().getX(),J=D.getStartPoint().getY(),K=D.getEndPoint().getX(),L=D.getEndPoint().getY(),M=(L-J)*(G-E)-(K-I)*(H-F),N=(K-I)*(F-J)-(L-J)*(E-I),O=(G-E)*(F-J)-(H-F)*(E-I);if(0==M)return 0==M&&0==N&&0==O?new g(w.COINCIDENT,null):new g(w.PARALLEL,null);var P=N/M,Q=O/M,R=A.getX()+P*(B.getX()-A.getX()),S=A.getY()+P*(B.getY()-A.getY());return 1<P||0>P||1<Q||0>Q?new g(w.LINE,new f(R,S)):new g(w.LINESEG,new f(R,S))}}function k(A,B,C,D){this.getLeft=function(){return A},this.getTop=function(){return B},this.getRight=function(){return C},this.getBottom=function(){return D},this.getPoints=function(){return[new f(A,B),new f(C,B),new f(C,D),new f(A,D)]},this.getLines=function(){return[new h(new f(A,B),new f(C,B)),new h(new f(C,B),new f(C,D)),new h(new f(C,D),new f(A,D)),new h(new f(A,D),new f(A,B))]},this.getPointsScaledToGrid=function(E){var F=new f(A+0.5*(C-A),B+0.5*(D-B)),G=(C-F.getX()+E)/(C-F.getX()),H=(D-F.getY()+E)/(D-F.getY()),I=[new f((A-F.getX())*G+F.getX(),(B-F.getY())*H+F.getY()),new f((C-F.getX())*G+F.getX(),(B-F.getY())*H+F.getY()),new f((C-F.getX())*G+F.getX(),(D-F.getY())*H+F.getY()),new f((A-F.getX())*G+F.getX(),(D-F.getY())*H+F.getY())];return I},this.checkIntersect=function(E){return!(D<E.getTop())&&!(B>E.getBottom())&&!(C<E.getLeft())&&!(A>E.getRight())},this.checkIsPointWithin=function(E){return E.getX()>=A&&E.getX()<=C&&E.getY()>=B&&E.getY()<=D},this.checkIsWithin=function(E){return D<=E.getBottom()&&B>=E.getTop()&&C<=E.getRight()&&A>=E.getLeft()}}function l(A){var B=this,C=[];this.push=function(E){var F=!1;return(C.forEach(function(G){E.isEqual(G)&&(F=!0)}),!F)&&(C.push(E),!0)},this.findPointClosestTo=function(E){var F=null,G=Number.MAX_SAFE_INTEGER;return C.forEach(function(H){var I=new h(E,H);I.getLength()<G&&(F=H,G=I.getLength())}),F},this.findDistanceToPointClosestTo=function(E){var F=Number.MAX_SAFE_INTEGER;return C.forEach(function(G){var H=new h(E,G);H.getLength()<F&&(F=H.getLength())}),F},this.findPointsCloseTo=function(E,F){var G=new l;return C.forEach(function(H){var I=new h(E,H);I.getLength()<=F&&G.push(H)}),G},this.toArray=function(){return C},this.toFloat64Array=function(){for(var E=new Float64Array(2*C.length),F=0;F<C.length;F++)E[0+2*F]=C[F].getX(),E[1+2*F]=C[F].getY();return E};this.count=function(){return C.length},A&&Array.isArray(A)?A.forEach(B.push):A&&"[object Float64Array]"===Object.prototype.toString.call(A)&&function D(E){C.length=0;for(var F=0;F<E.length;F+=2)C.push(new f(E[F],E[F+1]))}(A)}function m(A){var B=this,C=[];this.push=function(E){var F=!1;return(C.forEach(function(G){E.isEqual(G)&&(F=!0)}),!F)&&(C.push(E),!0)},this.toArray=function(){return C},this.count=function(){return C.length},this.toFloat64Array=function(){for(var E=new Float64Array(4*C.length),F=0;F<C.length;F++)E[0+4*F]=C[F].getStartPoint().getX(),E[1+4*F]=C[F].getStartPoint().getY(),E[2+4*F]=C[F].getEndPoint().getX(),E[3+4*F]=C[F].getEndPoint().getY();return E};A&&Array.isArray(A)?A.forEach(B.push):A&&"[object Float64Array]"===Object.prototype.toString.call(A)&&function D(E){C.length=0;for(var F=0;F<E.length;F+=4)C.push(new h(new f(E[F],E[F+1]),new f(E[F+2],E[F+3])))}(A)}function n(A,B,C){var D=this;this.getObjectId=function(){return B.getId()},this.getX=function(){return D.getCentroid().getX()},this.getY=function(){return D.getCentroid().getY()},this.getWidth=function(){var E=A.getBoundingClientRect();return E.right-E.left},this.getHeight=function(){var E=A.getBoundingClientRect();return E.bottom-E.top},this.getCentroid=function(){var E=A.getBoundingClientRect(),F=C.getPageOffset();return new f(E.left+F.getX()+0.5*D.getWidth(),E.top+F.getY()+0.5*D.getHeight())},this.getRoutingPoints=function(E){var F=D.getCentroid(),G=0.5*D.getWidth(),H=0.5*D.getHeight();return[new f(F.getX()+G+E,F.getY()),new f(F.getX()-G-E,F.getY()),new f(F.getX(),F.getY()+H+E),new f(F.getX(),F.getY()-H-E)]},this.getBoundingRectange=function(){var E=D.getCentroid(),F=0.5*D.getWidth(),G=0.5*D.getHeight();return new k(E.getX()-F,E.getY()-G,E.getX()+F,E.getY()+G)}}function o(A,B,C,D,E){var G=this;"undefined"==typeof D&&(D="#000"),"undefined"==typeof E&&(E="2px");var H=document.createElementNS("http://www.w3.org/2000/svg","path");H.setAttribute("d","M0 0 L0 0"),H.style.stroke=D,H.style.strokeWidth=E;this.appendPathToContainerDomElement=function(){C.appendChild(H)},this.refresh=function(I){H.setAttribute("d",I)},this.getId=function(){var I=[A.getObjectId(),B.getObjectId()].sort();return I.join(":")},this.getDescriptor=function(){return{id:G.getId(),anchor_start_centroid:A.getCentroid().toString(),anchor_end_centroid:B.getCentroid().toString()}}}function q(A,B,C){this.getSize=function(){return A},this.getStyle=function(){return C},this.getSvgImageTile=function(){return C===z.LINE?"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\""+A+"\" height=\""+A+"\"><rect width=\""+A+"\" height=\"1\" x=\"0\" y=\""+(A-1)+"\" style=\"fill:"+B+"\" /><rect width=\"1\" height=\""+A+"\" x=\""+(A-1)+"\" y=\"0\" style=\"fill:"+B+"\" /></svg>":"<svg xmlns=\"http://www.w3.org/2000/svg\" width=\""+A+"\" height=\""+A+"\"><rect width=\"1\" height=\"1\" x=\""+(A-1)+"\" y=\""+(A-1)+"\" style=\"fill:"+B+"\" /></svg>"}}function u(A){var B=this,C=[];this.getId=function(){return A},this.getObjectIndex=function(D){return B.getObjectIndexById(D.getId())},this.getObjectIndexById=function(D){for(var E=0;E<C.length;E++)if(C[E].getId()===D)return E;return null},this.addObject=function(D){return null===B.getObjectIndex(D)&&(C.push(D),!0)},this.getObjects=function(){return C},this.getObjectIds=function(){var D=[];return C.forEach(function(E){D.push(E.getId())}),D},this.removeObjectById=function(D){var E=B.getObjectIndexById(D);return null!==E&&(C.splice(E,1),!0)},this.removeAllObjects=function(){C.length=0}}var w=Object.freeze({PARALLEL:"parallel",COINCIDENT:"coincident",LINE:"line",LINESEG:"lineseg"}),z={LINE:"line",DOT:"dot"};return a.Dimensions=function(A,B){this.getWidth=function(){return A},this.getHeight=function(){return B}},a.Rectangle=k,a.Point=f,a.LINE_INTERSECTION_TYPE=w,a.LineIntersection=g,a.Line=h,a.CanvasObject=function(A,B,C,D,E,F,G,H,I){var L=this,M=[];this.x=parseInt(B),this.y=parseInt(C),this.width=parseInt(D),this.height=parseInt(E),this.isDeleted=!1,this.addNonInteractableConnectorAnchor=function(N){M.push(new n(N,L,F))},this.addInteractableConnectorAnchor=function(N){var O=new n(N,L,F);N.addEventListener("click",function(){F.addConnectionAnchorToSelectionStack(O)}),M.push(O)},this.getConnectorAnchorRoutingPoints=function(N){var O=L.getBoundingRectange(),P=[];return M.forEach(function(Q){var R=Q.getRoutingPoints(N);R.forEach(function(S){O.checkIsPointWithin(S)||P.push(S)})}),P},this.getConnectorAnchors=function(){return M},this.getTranslateHandleOffsetX=function(){return-(H.offsetLeft+0.5*H.offsetWidth)},this.getTranslateHandleOffsetY=function(){return-(H.offsetTop+0.5*H.offsetHeight)},this.getId=function(){return A},this.getX=function(){return L.x},this.setX=function(N){L.x=N},this.getY=function(){return L.y},this.setY=function(N){L.y=N},this.translate=function(N,O){L.x=N,L.y=O,G.style.left=parseInt(L.x)+"px",G.style.top=parseInt(L.y)+"px"},this.getWidth=function(){return L.width},this.getHeight=function(){return L.height},this.resize=function(N,O){L.width=N,L.height=O,G.style.width=parseInt(L.width)+"px",G.style.height=parseInt(L.height)+"px"},this.getIsDeleted=function(){return L.isDeleted},this.getDomElement=function(){return G},this.handleSiblingObjectChange=function(){},this.getBoundingRectange=function(){var N=parseInt(L.x),O=parseInt(L.y),P=N+parseInt(L.width),Q=O+parseInt(L.height);return new k(N,O,P,Q)},this.getBoundingPoints=function(){var N=new f(L.getX(),L.getY()),O=new f(L.getX()+L.getWidth(),L.getY()),P=new f(L.getX(),L.getY()+L.getWidth()),Q=new f(L.getX()+L.getWidth(),L.getY()+L.getWidth());return[N,O,P,Q]};var J=function moveStart(){},K=function resizeStart(){};this.setMoveStartCallback=function(N){J=N},this.setResizeStartCallback=function(N){K=N},H.addEventListener("touchstart",function(N){J(L,N.touches[0].pageX,N.touches[0].pageY,!0)}),H.addEventListener("mousedown",function(N){J(L,N.pageX,N.pageY,!1)}),I.addEventListener("mousedown",function(N){1!==N.which||K(L,N.pageX,N.pageY)})},a.Canvas=function(A,B,C){var T=this,U=B.document.createElementNS("http://www.w3.org/2000/svg","svg");U.style.width="100%",U.style.height="100%";var V=A.appendChild(U),D=null,E="transform 0.55s ease-in-out, transform-origin 0.55s ease-in-out",F=0,G=0,H=0,I=0,J=1,K=1,L=[],W=[],X=[],N=null,O=null,P=0,Q=0,R={lastTouchX:null,lastTouchY:null,lastTouchTime:null},Y=[],Z=new Map;this.getCurrentPointVisibilityMap=function(){return null},this.setGrid=function(ja){D=ja,A.style.background="url('data:image/svg+xml;base64,"+B.btoa(D.getSvgImageTile())+"') repeat"},this.getGrid=function(){return D},this.getGridSize=function(){return D.getSize()};var $=function(){var ja=new l;return W.forEach(function(ka){var la=ka.getBoundingRectange().getPointsScaledToGrid(T.getGridSize());la.forEach(function(ma){ja.push(ma)})}),W.forEach(function(ka){var la=ka.getConnectorAnchorRoutingPoints(T.getGridSize());la.forEach(function(ma){ja.push(ma)})}),ja},_=function(){var ja=new l;return W.forEach(function(ka){var la=ka.getConnectorAnchorRoutingPoints(T.getGridSize());la.forEach(function(ma){ja.push(ma)})}),ja},aa=function(){var ja=[];return W.forEach(function(ka){var la=ka.getBoundingRectange().getLines();la.forEach(function(na){ja.push(na)});var ma=ka.getConnectorAnchors();ma.forEach(function(na){var oa=na.getBoundingRectange().getLines();oa.forEach(function(pa){ja.push(pa)})})}),new m(ja)},ba=function(){var ja=[];X.forEach(function(na){ja.push(na.getDescriptor())});var ka=_().toFloat64Array(),la=$().toFloat64Array(),ma=aa().toFloat64Array();C.postMessage({gridSize:T.getGridSize(),connectorDescriptors:ja,routingPoints:la.buffer,boundaryLines:ma.buffer,anchorPoints:ka.buffer},[la.buffer,ma.buffer,ka.buffer])};C.onmessage=function(ja){var ka=ja.data.connectorDescriptors,la=function(ma){for(var na=0;na<ka.length;na++)if(ka[na].id===ma)return ka[na];return null};X.forEach(function(ma){var na=la(ma.getId());na&&ma.refresh(na.svgPath)})};var S=function makeNewConnector(ja,ka,la){return new o(ja,ka,la)};this.setConnectorFactory=function(ja){S=ja},this.getTransitionCss=function(){return E},this.setTransitionCss=function(ja){E=ja,A.style.transition=E},this.getTransformOriginX=function(){return F},this.getTransformOriginY=function(){return G},this.getScaleFactor=function(){return J},this.getTranslateX=function(){return H},this.getTranslateY=function(){return I},this.setTransformOrigin=function(ja,ka){F=ja,G=ka,A.style.transformOrigin=F+"px "+G+"px"},this.scale=function(ja,ka){if(ka=ka||!1,ka){var la=T.getGridSize()*ja,ma=Math.round(la);ja=ma/T.getGridSize()}return J=ja,K=1/J,L.push("scale3d("+J+","+J+","+J+")"),T},this.translate=function(ja,ka){return H=ja,I=ka,L.push("translate3d("+H+"px,"+I+"px,0)"),T},this.applyTransform=function(){A.style.transform=L.join(" "),L.length=0},this.resetTransform=function(){J=1,K=1,H=0,I=0,A.style.transform="none"},this.getPageOffset=function(){return new f(window.pageXOffset,window.pageYOffset)},this.snapToGrid=function(ja){var ka=Math.round(ja/T.getGridSize())*T.getGridSize();return Math.max(0,ka-1)},this.getOffsetLeft=function(){return A.offsetLeft},this.getOffsetTop=function(){return A.offsetTop},this.getWidth=function(){return A.offsetWidth},this.getHeight=function(){return A.offsetHeight},this.getObjectsAroundPoint=function(ja,ka){var la=[],ma=new k(ja,ka,ja+1,ka+1);return W.forEach(function(na){!na.getIsDeleted()&&ma.checkIntersect(na.getBoundingRectange())&&la.push(na)}),la},this.calcBoundingBox=function(){var ja=null,ka=null,la=null,ma=null;return W.forEach(function(na){var qa=parseInt(na.getX()),ra=parseInt(na.getY()),sa=qa+parseInt(na.getWidth()),ta=ra+parseInt(na.getHeight());(null==ka||qa<ka)&&(ka=qa),(null==ja||ra<ja)&&(ja=ra),(null==la||ta>la)&&(la=ta),(null==ma||sa>ma)&&(ma=sa)}),new k(ka,ja,ma,la)},this.getAllObjects=function(){return W},this.publishSiblingObjectChange=function(ja,ka){W.forEach(function(la){la.handleSiblingObjectChange(ja,ka)})},this.getObjectById=function(ja){var ka=null;return W.forEach(function(la){null==ka&&la.getId()===ja&&(ka=la)}),ka},this.addObject=function(ja){ja.setResizeStartCallback(da),ja.setMoveStartCallback(ea),W.push(ja),ba()},this.getConnector=function(ja){for(var ka=0;ka<X.length;ka++)if(X[ka].getId()===ja)return X[ka];return null},this.addConnectionAnchorToSelectionStack=function(ja){if(Y.push(ja),2===Y.length){var ka=S(Y[0],Y[1],V),la=T.getConnector(ka.getId());Y.length=0,null===la&&(X.push(ka),ka.appendPathToContainerDomElement(),ba())}};var ca=function(ja,ka){var la=T.getObjectsAroundPoint(ja,ka),ma={targetPoint:new f(ja,ka),objectsAroundPoint:la};ia("dblclick",ma)};this.initInteractionHandlers=function(ja,ka){A.addEventListener("dblclick",function(la){ca(la.pageX,la.pageY)}),A.addEventListener("click",function(la){var ma=!1;la.target!==A&&(ma=!0);var na={targetPoint:new f(la.pageX,la.pageY),canvasObjectClicked:ma};ia("click",na)}),A.addEventListener("touchend",function(la){if(0>=la.changedTouches.length)return!1;var ma=!1,na=la.changedTouches[0].pageX,oa=la.changedTouches[0].pageY,pa=new Date().getTime();if(null!==R.lastTouchTime){var qa=R.lastTouchTime,sa=R.lastTouchX,ta=R.lastTouchY,ua=Math.sqrt(Math.pow(na-sa,2)+Math.pow(oa-ta,2));pa-qa<=ja&&ua<=ka&&(ma=!0,ca(na,oa),R.lastTouchTime=null,R.lastTouchX=null,R.lastTouchY=null)}ma||(R.lastTouchTime=pa,R.lastTouchX=na,R.lastTouchY=oa)})};var da=function(ja){O=ja.getId()},ea=function(ja,ka,la){N=ja.getId(),P=ka,Q=la},fa=function(ja,ka){var la=T.getObjectById(N),ma=T.snapToGrid(ja+la.getTranslateHandleOffsetX()),na=T.snapToGrid(ka+la.getTranslateHandleOffsetY());la.translate(ma,na),ba()},ga=function(ja,ka){var la=T.getObjectById(N),ma=T.snapToGrid(ja+la.getTranslateHandleOffsetX()),na=T.snapToGrid(ka+la.getTranslateHandleOffsetY()),oa=P,pa=Q;oa==ma&&pa==na||(la.translate(ma,na),ia("object-translated",{object:la}))},ha=function(ja,ka){var la=T.getObjectById(O),ma=T.snapToGrid(ja),na=T.snapToGrid(ka),oa=la.getY(),pa=la.getX();la.resize(ma-pa+1,na-oa+1),ba(),ia("object-resized",{object:la})};this.initTransformationHandlers=function(){A.addEventListener("touchmove",function(ja){null!==N&&(fa(ja.touches[0].pageX*K,ja.touches[0].pageY*K),ja.preventDefault())}),A.addEventListener("mousemove",function(ja){null!==N&&fa(ja.pageX*K,ja.pageY*K),null!==O&&ha(ja.pageX*K,ja.pageY*K)}),A.addEventListener("touchend",function(){if(null!==N){T.getObjectById(N);N=null,O=null}}),A.addEventListener("mouseup",function(ja){1===ja.which&&(null!==N&&ga(ja.pageX*K,ja.pageY*K),N=null,O=null)}),A.addEventListener("mousedown",function(ja){(null!==N||null!==O)&&(ja.preventDefault(),ja.stopPropagation())})};var ia=function(ja,ka){for(var na,la=Z.get(ja)||[],ma=0;ma<la.length;ma++)na=la[ma],na(ka)};this.off=function(ja,ka){for(var la=Z.get(ja)||[],ma=0;ma<la.length;ma++)if(la[ma]===ka){la.splice(ma,1);break}Z.set(ja,la)},this.on=function(ja,ka){var la=Z.get(ja)||[];la.push(ka),Z.set(ja,la)},T.setGrid(new q(12,"#424242",z.DOT)),T.resetTransform(),T.setTransformOrigin(0,0),T.setTransitionCss(E)},a.Cluster=u,a.BoxClusterDetector=function(A){var B=this,C=function(F,G){for(var H=0;H<G.length;H++)if(G[H].getId()===F.getId())return H;return-1},D=function(F,G){for(var I,H=0;H<F.length;H++)I=C(F[H],G),-1!==I&&G.splice(I,1);return G},E=function(F){var G=0,H=null;return F.forEach(function(I,J){I>G&&(G=I,H=J)}),H};this.areObjectsClose=function(F,G){var H=new k(F.x-A,F.y-A,F.x+F.width+A,F.y+F.height+A),I=new k(G.x-A,G.y-A,G.x+G.width+A,G.y+G.height+A);return H.checkIntersect(I)},this.getAllObjectsCloseTo=function(F,G){for(var H=[],I=0;I<G.length;I++)F.getId()!==G[I].getId()&&B.areObjectsClose(F,G[I])&&H.push(G[I]);return H},this.getClusterObjectsFromSeed=function(F,G,H){var I=B.getAllObjectsCloseTo(F,G);return 0===I.length?[]:void(D(I.concat([F]),G),I.forEach(function(J){H.push(J),B.getClusterObjectsFromSeed(J,G,H)}))},this.findIntersectingClustersForObjects=function(F,G){var H=new Map;return G.forEach(function(I){for(var J=I.getObjects(),K=0;K<J.length;K++)for(var L=0;L<F.length;L++)if(J[K].getId()===F[L].getId())if(H.has(I)){var M=H.get(I);H.set(I,M+1)}else H.set(I,1)}),H},this.removeObjectFromClusters=function(F,G){G.forEach(function(H){H.removeObjectById(F.getId())})},this.computeClusters=function(F,G,H){for(var I=G.map(function(O){return O}),J=F.map(function(O){return O});0<J.length;){var K=J.pop(),L=[K];if(B.getClusterObjectsFromSeed(K,J,L),1<L.length){var M=B.findIntersectingClustersForObjects(L,I);0===M.size?function(){var O=new u(H());L.forEach(function(P){O.addObject(P)}),I.push(O)}():function(){var O=E(M);O.removeAllObjects(),L.forEach(function(P){B.removeObjectFromClusters(P,I),O.addObject(P)})}(),D(L,J)}else B.removeObjectFromClusters(K,I)}var N=I.filter(function(O){return!!(2<=O.getObjects().length)});return N}},a.Connector=o,a.ConnectorAnchor=n,a.PointVisibilityMap=function(A,B){var C=this,D=new Map,E=function(I){for(var L,J=B.toArray(),K=0;K<J.length;K++)if(L=J[K].computeIntersectionType(I),L===w.LINESEG)return!0;return!1},G=function(I){var J=Number.MAX_SAFE_INTEGER,K=null,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var O,N=I.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(O=N.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(O.value,2),L=_step$value[0],M=_step$value[1];M<J&&(K=L,J=M)}}catch(P){_didIteratorError=!0,_iteratorError=P}finally{try{!_iteratorNormalCompletion&&N.return&&N.return()}finally{if(_didIteratorError)throw _iteratorError}}return null===K?null:{cost:J,point:K}},H=function(I,J,K,L){var N=new Map,M=D.get(K);M=M.filter(function(P){for(var Q=0;Q<J.length;Q++)if(P.isEqual(J[Q]))return!1;return!0}),M.forEach(function(P){var Q=new h(K,P).getLength()+I,R=new h(P,L).getLength();N.set(P,Q+R)});var O=G(N);return null===O?null:O};this.findPointClosestTo=function(I){var J=null,K=Number.MAX_SAFE_INTEGER;return D.forEach(function(L,M){var N=new h(I,M);N.getLength()<K&&(J=M,K=N.getLength())}),J},this.findVisiblePointClosestTo=function(I){var J=null,K=Number.MAX_SAFE_INTEGER;return D.forEach(function(L,M){var N=new h(I,M);!E(N)&&N.getLength()<K&&(J=M,K=N.getLength())}),J},this.computeRoute=function(I,J){var M=C.findVisiblePointClosestTo(I);if(null===M)return new l;for(var O,K=0,N=[M],L=M;(O=H(K,N,L,J),null!==O)&&(K+=new h(L,O.point).getLength(),N.push(O.point),L=O.point,!(1>new h(L,J).getLength())););return new l(N)},function F(){for(var I=A.toArray(),J=0;J<I.length;J++)D.set(I[J],[]);for(var K=0;K<I.length;K++)for(var M,L=K+1;L<I.length;L++)if(M=new h(I[K],I[L]),!E(M)){var N=D.get(I[K]);N.push(I[L]),D.set(I[K],N);var O=D.get(I[L]);O.push(I[K]),D.set(I[L],O)}}()},a.GRID_STYLE=z,a.Grid=q,a}({});